{"title":"blog.html","content":"<!DOCTYPE html>\n<html lang=\"it\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Blog - Pedagogia & Benessere</title>\n    <style>\n        :root { --primary: #6b46c1; --text: #2d3748; --light: #f4f7f6; }\n        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #fafbff; color: var(--text); line-height: 1.6; }\n        \n        /* Navigazione */\n        nav { background: white; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000; }\n        .logo { font-weight: bold; color: var(--primary); font-size: 20px; text-decoration: none; }\n        .nav-links a { margin-left: 20px; text-decoration: none; color: #4a5568; font-weight: 500; }\n\n        /* Layout Principale */\n        .main-container { max-width: 1200px; margin: 40px auto; display: grid; grid-template-columns: 1fr 350px; gap: 40px; padding: 0 20px; }\n\n        /* Articolo Centrale */\n        #featured-post { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.05); border: 1px solid #edf2f7; }\n        .featured-img { width: 100%; height: 450px; object-fit: cover; background: #eee; }\n        .featured-content { padding: 40px; }\n        .featured-content h1 { font-size: 36px; margin: 10px 0; color: var(--primary); }\n        .date-label { color: #a0aec0; font-size: 14px; text-transform: uppercase; }\n\n        /* Barra Laterale */\n        .sidebar { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); height: fit-content; }\n        .search-box { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; margin-bottom: 20px; box-sizing: border-box; }\n        \n        .side-post { display: flex; gap: 15px; margin-bottom: 20px; cursor: pointer; padding: 10px; border-radius: 12px; transition: 0.2s; border: 1px solid transparent; }\n        .side-post:hover { background: var(--light); border-color: var(--primary); }\n        .side-post img { width: 70px; height: 70px; border-radius: 8px; object-fit: cover; }\n        .side-post-info h4 { margin: 0; font-size: 14px; color: var(--text); }\n\n        .error-msg { padding: 50px; text-align: center; color: #e53e3e; }\n\n        @media (max-width: 900px) {\n            .main-container { grid-template-columns: 1fr; }\n            .featured-img { height: 250px; }\n        }\n    </style>\n</head>\n<body>\n\n    <nav>\n        <a href=\"/\" class=\"logo\">Dott.ssa Gariglio</a>\n        <div class=\"nav-links\">\n            <a href=\"/\">Home</a>\n            <a href=\"/blog.html\">Blog</a>\n            <a href=\"/admin\">Area Riservata</a>\n        </div>\n    </nav>\n\n    <div class=\"main-container\">\n        <article id=\"featured-post\">\n            <div id=\"featured-data\">\n                <div style=\"padding: 100px; text-align: center;\">Caricamento articoli...</div>\n            </div>\n        </article>\n\n        <aside class=\"sidebar\">\n            <h3>Cerca</h3>\n            <input type=\"text\" class=\"search-box\" id=\"searchInput\" placeholder=\"Cerca titolo...\" onkeyup=\"filterPosts()\">\n            <h3>Altri Articoli</h3>\n            <div id=\"posts-list\"></div>\n        </aside>\n    </div>\n\n    <script>\n        const WORKER_URL = \"https://gestore-blog.simone-gariglio1.workers.dev/\";\n        let allPosts = [];\n\n        async function loadPosts() {\n            const display = document.getElementById('featured-data');\n            try {\n                // Chiamata al tuo Worker che ha il permesso per GitHub\n                const response = await fetch(WORKER_URL);\n                if (!response.ok) throw new Error(\"Il Worker ha risposto con errore.\");\n\n                const files = await response.json();\n                const jsonFiles = files.filter(f => f.name.endsWith('.json'));\n\n                if (jsonFiles.length === 0) {\n                    display.innerHTML = \"<div style='padding:50px; text-align:center;'>Nessun articolo trovato. Scrivine uno dall'area admin!</div>\";\n                    return;\n                }\n\n                // Carichiamo i contenuti di ogni file JSON\n                const promises = jsonFiles.map(f => fetch(f.download_url).then(res => res.json()));\n                allPosts = await Promise.all(promises);\n                \n                // Ordiniamo per data (piÃ¹ recente sopra)\n                allPosts.sort((a, b) => new Date(b.date) - new Date(a.date));\n\n                render(allPosts);\n            } catch (err) {\n                console.error(err);\n                display.innerHTML = `<div class='error-msg'><b>Errore:</b><br>${err.message}</div>`;\n            }\n        }\n\n        function render(posts) {\n            if (posts.length === 0) return;\n            showFeatured(posts[0]); // Mostra l'ultimo in grande\n\n            const list = document.getElementById('posts-list');\n            list.innerHTML = '';\n            posts.forEach((post, index) => {\n                list.innerHTML += `\n                    <div class=\"side-post\" onclick=\"showFeaturedByIndex(${index})\">\n                        <img src=\"${post.image || 'https://via.placeholder.com/100?text=Blog'}\">\n                        <div class=\"side-post-info\">\n                            <h4>${post.title}</h4>\n                            <span>${new Date(post.date).toLocaleDateString('it-IT')}</span>\n                        </div>\n                    </div>`;\n            });\n        }\n\n        function showFeatured(post) {\n            document.getElementById('featured-data').innerHTML = `\n                ${post.image ? `<img src=\"${post.image}\" class=\"featured-img\">` : ''}\n                <div class=\"featured-content\">\n                    <span class=\"date-label\">${new Date(post.date).toLocaleDateString('it-IT', { day:'numeric', month:'long', year:'numeric'})}</span>\n                    <h1>${post.title}</h1>\n                    <p style=\"white-space: pre-wrap;\">${post.content}</p>\n                </div>`;\n            window.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n\n        function showFeaturedByIndex(index) {\n            showFeatured(allPosts[index]);\n        }\n\n        function filterPosts() {\n            const query = document.getElementById('searchInput').value.toLowerCase();\n            const filtered = allPosts.filter(p => p.title.toLowerCase().includes(query));\n            render(filtered);\n        }\n\n        loadPosts();\n    </script>\n</body>\n</html>","image":"","date":"2026-01-13T10:05:49.873Z"}